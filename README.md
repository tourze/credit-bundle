# 积分模块

一个通用的积分、信用模块

积分这里的设计，会涉及到一个实体值的存储设计，需要认真想好。
可以参考 http://doumaomao.github.io/blog/%E5%85%B3%E4%BA%8E%E7%A7%AF%E5%88%86%E5%85%91%E6%8D%A2%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%80%9D%E8%80%83.html

为了方便统计积分出入情况，需要新增一个 Account（账户） 的概念。
一次转账事务，必然会有 转出方账户 和 转入方账户。
还要引入一个记账的概念？

TODO 过期积分的逻辑实现

这部分逻辑太重要，需要了解以下内容再继续：

1. [账户系统和会计系统的设计](https://juejin.cn/post/6844904105995927566)
2. [全面解构支付系统设计——你不可不知的会计核心](http://www.woshipm.com/pd/1586244.html)
3. [账务系统设计](https://www.jianshu.com/p/2f00e272f34f)
4. [“退款转付款”的设计方法](https://www.woshipm.com/pd/5965961.html)

## 外部积分的对接

在实际开发过程中，我们可能需要使用外部积分，外部积分一般我们需要调用第三方接口去查询，同时呢本地也需要一些数据来进行校正，还是比较麻烦的。
为此，我们的做法是在模块尽量分发事件出去，然后让事件去控制这个

## 积分过期的实现

我们使用子账号来实现这个。一个主账号会有N个子账号。
然后子账号才有过期时间，统计主账号的余额等信息，就是统计主+子账号的所有余额信息。
